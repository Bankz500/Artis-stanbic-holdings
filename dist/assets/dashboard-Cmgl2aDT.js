import"./modulepreload-polyfill-B5Qt9EMX.js";import{initializeApp as $}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";import{getAuth as N,onAuthStateChanged as E,signOut as B}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js";import{getFirestore as D,doc as v,getDoc as L,collection as m,query as p,where as h,getDocs as u}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js";const H={apiKey:"AIzaSyCJdMdkW5NZF83PLBLYZk3yBAFsUxqautY",authDomain:"atpib-82d72.firebaseapp.com",projectId:"atpib-82d72",storageBucket:"atpib-82d72.firebasestorage.app",messagingSenderId:"938927546204",appId:"1:938927546204:web:ea096f1dfe3b3754dd6b99",measurementId:"G-G3BRPK5B9T"},y=$(H),f=N(y),d=D(y);E(f,async n=>{if(n){console.log("User is logged in:",n.uid);const x=v(d,"users",n.uid),r=await L(x);if(r.exists()){const t=r.data();document.getElementById("Deposit-account").textContent=`${t.deposit||"$0.00"}`,document.getElementById("history1").textContent=`${t.history1||"No history available"}`,document.getElementById("history2").textContent=`${t.history2||"No history available"}`,document.getElementById("history3").textContent=`${t.history3||""}`,document.getElementById("wallet").textContent=`${t.wallet||"$0.00"}`,document.getElementById("bonus-wallet").textContent=`${t.bonus||"$0.00"}`,document.getElementById("pending1").textContent=`${t.pending1||"No pending transactions"}`,document.getElementById("pending2").textContent=`${t.pending2||""}`,document.getElementById("pending3").textContent=`${t.pending3||""}`;const c=document.getElementById("welcome-name");t.firstName?c.textContent=`Welcome back, ${t.firstName}`:(c.textContent="Welcome User",console.log("User data does not contain a name field."));const w=m(d,"history"),C=p(w,h("userId","==",n.uid)),l=await u(C),i=document.getElementById("history-container");if(i.innerHTML="",!l.empty)l.forEach(e=>{const s=e.data(),o=document.createElement("div");o.className="bg-white p-4 rounded-lg shadow-md text-center h-16",o.innerHTML=`
                                <h3 class="font-semibold text-gray-800">${s.description||"No description"}</h3>
                                <p class="text-gray-600">ID: ${e.id}</p>
                                <p class="text-gray-600">$${s.amount||""}</p>
                            `,i.appendChild(o)});else{console.log("No transaction history found for this user.");const e=document.createElement("div");e.className="bg-white p-4 rounded-lg shadow-md text-center h-16",e.innerHTML=`
                            <h3 class="font-semibold text-gray-800">No history</h3>
                            <p class="text-gray-600">You have no transaction history.</p>
                        `,i.appendChild(e)}const b=m(d,"pending"),I=p(b,h("userId","==",n.uid)),g=await u(I),a=document.getElementById("pending-container");if(a.innerHTML="",!g.empty)g.forEach(e=>{const s=e.data(),o=document.createElement("div");o.className="bg-white p-4 rounded-lg shadow-md text-center h-16",o.innerHTML=`
                                <h3 class="font-semibold text-gray-800">${s.description||"No description"}</h3>
                                <p class="text-gray-600">ID: ${e.id}</p>
                                <p class="text-gray-600">$${s.amount||""}</p>
                            `,a.appendChild(o)});else{console.log("No pending transactions found for this user.");const e=document.createElement("div");e.className="bg-white p-4 rounded-lg shadow-md text-center h-16",e.innerHTML=`
                            <h3 class="font-semibold text-gray-800">No pending transactions</h3>
                            <p class="text-gray-600">You have no pending transactions.</p>
                        `,a.appendChild(e)}}else console.log("No user document found in Firestore."),alert("No user data found.")}else console.log("No user signed in, redirecting to sign-in page."),window.location.href="sign-in.html"});window.signOut=function(){B(f).then(()=>{alert("Signed out successfully!"),window.location.href="sign-in.html"}).catch(n=>{alert("Error signing out: "+n.message)})};
