import"./modulepreload-polyfill-B5Qt9EMX.js";import{initializeApp as T}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";import{getAuth as w,onAuthStateChanged as v,signOut as x}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js";import{getFirestore as D,doc as L,getDoc as M,collection as u,query as p,where as y,getDocs as f}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js";const H={apiKey:"AIzaSyABYV12B7RM2ZCD2G1lFTLpgJwflJFwEXY",authDomain:"beal-offshore.firebaseapp.com",projectId:"beal-offshore",storageBucket:"beal-offshore.firebasestorage.app",messagingSenderId:"1091834410162",appId:"1:1091834410162:web:56285433b5751e681745ab",measurementId:"G-CT463F3T6J"},C=T(H),I=w(C),c=D(C);let E;const A=2e5;function s(){clearTimeout(E),E=setTimeout(()=>{const n=w();x(n).then(()=>{window.location.href="login.html"}).catch(a=>{console.error("Error signing out:",a),window.location.href="login.html"})},A)}document.addEventListener("mousemove",s);document.addEventListener("keypress",s);document.addEventListener("click",s);document.addEventListener("scroll",s);document.addEventListener("touchstart",s);s();v(I,async n=>{if(n){console.log("User is logged in:",n.uid);const a=L(c,"users",n.uid),l=await M(a);if(l.exists()){const e=l.data();document.getElementById("Deposit-account").textContent=`${e.deposit||"$0.00"}`,document.getElementById("history1").textContent=`${e.history1||"No history available"}`,document.getElementById("history2").textContent=`${e.history2||""}`,document.getElementById("history3").textContent=`${e.history3||""}`,document.getElementById("history4").textContent=`${e.history4||""}`,document.getElementById("history5").textContent=`${e.history5||""}`,document.getElementById("history6").textContent=`${e.history6||""}`,document.getElementById("history7").textContent=`${e.history7||""}`,document.getElementById("wallet").textContent=`${e.wallet||"$0.00"}`,document.getElementById("bonus-wallet").textContent=`${e.bonus||"$0.00"}`,document.getElementById("pending1").textContent=`${e.pending1||"No pending transactions"}`,document.getElementById("pending2").textContent=`${e.pending2||""}`,document.getElementById("pending3").textContent=`${e.pending3||""}`;const m=document.getElementById("welcome-name");e.firstName?m.textContent=`Welcome back, ${e.firstName}`:(m.textContent="Welcome back, User",console.log("User data does not contain a firstName field."));const $=u(c,"history"),b=p($,y("userId","==",n.uid)),g=await f(b),d=document.getElementById("history-container");if(d.innerHTML="",!g.empty)g.forEach(t=>{const i=t.data(),o=document.createElement("div");o.className="bg-white p-4 rounded-lg shadow-md text-center h-16",o.innerHTML=`
                                <h3 class="font-semibold text-gray-800">${i.description||"No description"}</h3>
                                <p class="text-gray-600">ID: ${t.id}</p>
                                <p class="text-gray-600">$${i.amount||""}</p>
                            `,d.appendChild(o)});else{console.log("No transaction history found for this user.");const t=document.createElement("div");t.className="bg-white p-4 rounded-lg shadow-md text-center h-16",t.innerHTML=`
                            <h3 class="font-semibold text-gray-800">No history</h3>
                            <p class="text-gray-600">You have no transaction history.</p>
                        `,d.appendChild(t)}const N=u(c,"pending"),B=p(N,y("userId","==",n.uid)),h=await f(B),r=document.getElementById("pending-container");if(r.innerHTML="",!h.empty)h.forEach(t=>{const i=t.data(),o=document.createElement("div");o.className="bg-white p-4 rounded-lg shadow-md text-center h-16",o.innerHTML=`
                                <h3 class="font-semibold text-gray-800">${i.description||"No description"}</h3>
                                <p class="text-gray-600">ID: ${t.id}</p>
                                <p class="text-gray-600">$${i.amount||""}</p>
                            `,r.appendChild(o)});else{console.log("No pending transactions found for this user.");const t=document.createElement("div");t.className="bg-white p-4 rounded-lg shadow-md text-center h-16",t.innerHTML=`
                            <h3 class="font-semibold text-gray-800">No pending transactions</h3>
                            <p class="text-gray-600">You have no pending transactions.</p>
                        `,r.appendChild(t)}}else console.log("No user document found in Firestore."),alert("No user data found.")}else console.log("No user signed in, redirecting to sign-in page."),window.location.href="login..html"});window.signOut=function(){x(I).then(()=>{alert("Signed out successfully!"),window.location.href="login.html"}).catch(n=>{alert("Error signing out: "+n.message)})};
