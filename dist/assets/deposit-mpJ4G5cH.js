import"./modulepreload-polyfill-B5Qt9EMX.js";import{initializeApp as D}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";import{getAuth as M,onAuthStateChanged as $,signOut as H}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js";import{getFirestore as B,doc as L,getDoc as S,collection as m,query as g,where as p,getDocs as h}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js";const T={apiKey:"AIzaSyDyZiL4-h5n9Kqr24e7liROgHXMZau2ZmI",authDomain:"artis-stanbic-holdings.firebaseapp.com",projectId:"artis-stanbic-holdings",storageBucket:"artis-stanbic-holdings.appspot.com",messagingSenderId:"124094989669",appId:"1:124094989669:web:54e6306dc5747a80ec8d8c",measurementId:"G-0WSC5YMY2C"},y=D(T),w=M(y),c=B(y),u=document.getElementById("balance"),f=document.getElementById("welcome-name"),i=document.getElementById("history-container"),s=document.getElementById("pending-container");$(w,async t=>{if(t){console.log("User is logged in:",t.uid);const b=L(c,"users",t.uid),d=await S(b);if(d.exists()){const a=d.data(),C=a.wallet||0;u?u.textContent=`$${parseFloat(C).toFixed(2)}`:console.warn("Balance element not found in the DOM"),f&&(f.textContent=a.firstName?`Welcome back, ${a.firstName}`:"Welcome, User");const x=m(c,"history"),N=g(x,p("userId","==",t.uid)),r=await h(N);if(i)if(i.innerHTML="",!r.empty)r.forEach(e=>{const o=e.data(),n=document.createElement("div");n.className="bg-white p-4 rounded-lg shadow-md text-center",n.innerHTML=`
                                    <h3 class="font-semibold text-gray-800">${o.description||"No description"}</h3>
                                    <p class="text-gray-600">$${o.amount||""}</p>
                                `,i.appendChild(n)});else{const e=document.createElement("div");e.className="bg-white p-4 rounded-lg shadow-md text-center",e.innerHTML='<h3 class="font-semibold text-gray-800">No history</h3>',i.appendChild(e)}const E=m(c,"pending"),I=g(E,p("userId","==",t.uid)),l=await h(I);if(s)if(s.innerHTML="",!l.empty)l.forEach(e=>{const o=e.data(),n=document.createElement("div");n.className="bg-white p-4 rounded-lg shadow-md text-center",n.innerHTML=`
                                    <h3 class="font-semibold text-gray-800">${o.description||"No description"}</h3>
                                    <p class="text-gray-600">$${o.amount||""}</p>
                                `,s.appendChild(n)});else{const e=document.createElement("div");e.className="bg-white p-4 rounded-lg shadow-md text-center",e.innerHTML='<h3 class="font-semibold text-gray-800">No pending transactions</h3>',s.appendChild(e)}}else console.log("No user document found in Firestore."),alert("No user data found.")}else console.log("No user signed in, redirecting to sign-in page."),window.location.href="sign-in.html"});window.signOut=function(){H(w).then(()=>{alert("Signed out successfully!"),window.location.href="sign-in.html"}).catch(t=>{alert("Error signing out: "+t.message)})};
