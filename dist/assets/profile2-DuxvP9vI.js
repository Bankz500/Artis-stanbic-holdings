import"./modulepreload-polyfill-B5Qt9EMX.js";import{initializeApp as m}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";import{getAuth as u,onAuthStateChanged as f,updateProfile as p}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js";import{getFirestore as g,getDoc as h,doc as s,updateDoc as y}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js";const I={apiKey:"AIzaSyABYV12B7RM2ZCD2G1lFTLpgJwflJFwEXY",authDomain:"beal-offshore.firebaseapp.com",projectId:"beal-offshore",storageBucket:"beal-offshore.firebasestorage.app",messagingSenderId:"1091834410162",appId:"1:1091834410162:web:56285433b5751e681745ab",measurementId:"G-CT463F3T6J"},i=m(I),d=u(i),c=g(i);window.onload=function(){document.getElementById("profileInfoCard").classList.remove("hidden"),f(d,async e=>{if(e){const o=document.getElementById("email"),t=document.getElementById("firstName");o.placeholder=e.email,o.value=e.email;try{const r=await h(s(c,"users",e.uid));if(r.exists()){const a=r.data(),l=a.firstName&&a.lastName?`${a.firstName} ${a.lastName}`:a.firstName||"No name set";t.value=l,t.placeholder=l}else t.value=e.displayName||"No name set",t.placeholder=e.displayName||"No name set";const n=e.photoURL||"https://via.placeholder.com/150";document.getElementById("profileImage").src=n}catch(r){console.error("Error fetching user data:",r),t.value="Error loading name",t.placeholder="Error loading name"}}})};document.getElementById("imageUpload").addEventListener("change",async function(e){const o=e.target.files[0];if(o){const t=new FormData;t.append("file",o),t.append("upload_preset","ASHB_profile");try{const n=await(await fetch("https://api.cloudinary.com/v1_1/dmgcagkqa/image/upload",{method:"POST",body:t})).json();if(n.secure_url){document.getElementById("profileImage").src=n.secure_url;const a=d.currentUser;a&&(await y(s(c,"users",a.uid),{photoURL:n.secure_url}),await p(a,{photoURL:n.secure_url}),alert("Profile image updated successfully!"))}}catch(r){console.error("Error uploading image:",r),alert("Failed to upload image. Please try again.")}}});window.updateProfile=function(){const e=document.getElementById("saveChangesButton"),o=e.textContent;e.disabled=!0,e.textContent="Processing...",setTimeout(function(){const t=document.getElementById("firstName").value.trim();if(!t){alert("Please enter valid information for full name.");return}localStorage.setItem("fullName",t),alert("Profile updated successfully!"),e.disabled=!1,e.textContent=o},2e3)};
