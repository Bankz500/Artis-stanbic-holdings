import"./modulepreload-polyfill-B5Qt9EMX.js";import{initializeApp as m}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";import{getAuth as p,onAuthStateChanged as u,updateProfile as f}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js";import{getFirestore as g,getDoc as h,doc as s,updateDoc as y}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js";const w={apiKey:"AIzaSyABYV12B7RM2ZCD2G1lFTLpgJwflJFwEXY",authDomain:"beal-offshore.firebaseapp.com",projectId:"beal-offshore",storageBucket:"beal-offshore.firebasestorage.app",messagingSenderId:"1091834410162",appId:"1:1091834410162:web:56285433b5751e681745ab",measurementId:"G-CT463F3T6J"},c=m(w),i=p(c),d=g(c);window.onload=function(){document.getElementById("profileInfoCard").classList.remove("hidden"),u(i,async e=>{if(e){const n=document.getElementById("email"),a=document.getElementById("firstName");n.placeholder=e.email,n.value=e.email;try{const t=await h(s(d,"users",e.uid));if(t.exists()){const o=t.data(),l=o.firstName&&o.lastName?`${o.firstName} ${o.lastName}`:o.firstName||"No name set";a.value=l,a.placeholder=l}else a.value=e.displayName||"No name set",a.placeholder=e.displayName||"No name set";const r=e.photoURL||"https://via.placeholder.com/150";document.getElementById("profileImage").src=r}catch(t){console.error("Error fetching user data:",t),a.value="Error loading name",a.placeholder="Error loading name"}}})};document.getElementById("imageUpload").addEventListener("change",async function(e){const n=e.target.files[0];if(n){const a=new FormData;a.append("file",n),a.append("upload_preset","ASHB_profile");try{const r=await(await fetch("https://api.cloudinary.com/v1_1/dmgcagkqa/image/upload",{method:"POST",body:a})).json();if(r.secure_url){document.getElementById("profileImage").src=r.secure_url;const o=i.currentUser;o&&(await y(s(d,"users",o.uid),{photoURL:r.secure_url}),await f(o,{photoURL:r.secure_url}),alert("Profile image updated successfully!"))}}catch(t){console.error("Error uploading image:",t),alert("Failed to upload image. Please try again.")}}});window.signOut=function(){i.signOut().then(()=>{console.log("User signed out"),window.location.href="login.html"}).catch(e=>{console.error("Sign out error:",e)})};
