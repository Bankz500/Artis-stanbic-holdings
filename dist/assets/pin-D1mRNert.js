import"./modulepreload-polyfill-B5Qt9EMX.js";import{initializeApp as d}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";import{getAuth as m,onAuthStateChanged as l,signOut as r}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-auth.js";import{getFirestore as c,doc as u,getDoc as g}from"https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js";const f={apiKey:"AIzaSyABYV12B7RM2ZCD2G1lFTLpgJwflJFwEXY",authDomain:"beal-offshore.firebaseapp.com",projectId:"beal-offshore",storageBucket:"beal-offshore.firebasestorage.app",messagingSenderId:"1091834410162",appId:"1:1091834410162:web:56285433b5751e681745ab",measurementId:"G-CT463F3T6J"},a=d(f),i=m(a),p=c(a);l(i,async t=>{if(t){const n=u(p,"users",t.uid),e=await g(n);if(e.exists()){const o=e.data();document.getElementById("firstName").value=o.firstName||"",document.getElementById("firstName").placeholder=o.firstName||"First Name",document.getElementById("profileUsername").textContent=o.firstName||"@syndicate",document.getElementById("Deposit-account").textContent=o.deposit||"0.00",document.getElementById("Profit-wallet").textContent=o.profit||"0.00",document.getElementById("wallet").textContent=o.wallet||"0.00",document.getElementById("welcome-message").textContent=`Welcome ${o.firstName}`,document.getElementById("displayEmail").textContent=t.email}else console.log("No user document found."),alert("No user data found.")}else console.log("No user signed in. Redirecting to sign-in page."),window.location.href="login.html"});window.signOut=function(){r(i).then(()=>{alert("Signed out successfully!"),window.location.href="login.html"}).catch(t=>{alert("Error signing out: "+t.message)})};const y=document.getElementById("changePinForm");y.addEventListener("submit",t=>{t.preventDefault();const n=document.getElementById("newPin").value;if(n.length!==5||isNaN(n)){alert("Please enter a valid 5-digit PIN.");return}const e=document.getElementById("submitButton");e.disabled=!0,e.textContent="Processing...",setTimeout(()=>{document.getElementById("passwordModal").classList.remove("hidden"),e.disabled=!1,e.textContent="Change PIN"},1e3)});const s=document.getElementById("passwordConfirmForm");s.addEventListener("submit",async t=>{t.preventDefault(),document.getElementById("email").value,document.getElementById("firebasePassword").value,document.getElementById("newPin").value;const n=s.querySelector('button[type="submit"]');n.disabled=!0,n.textContent="Processing...",setTimeout(()=>{const e=document.createElement("div");e.textContent="PIN changed successfully!",e.className="text-blue-900 text-center mt-4",s.parentElement.appendChild(e),setTimeout(()=>{document.getElementById("passwordModal").classList.add("hidden")},2e3)},1e3),setTimeout(()=>{n.disabled=!1,n.textContent="Confirm"},1e3)});
