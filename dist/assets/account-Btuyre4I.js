import"./modulepreload-polyfill-B5Qt9EMX.js";import"./index.esm-BeIn6wDe.js";import{initializeApp as o}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";import{getAuth as d,createUserWithEmailAndPassword as c,sendEmailVerification as l,onAuthStateChanged as m}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";import{getFirestore as u,setDoc as p,doc as g}from"https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";const f={apiKey:"AIzaSyCJdMdkW5NZF83PLBLYZk3yBAFsUxqautY",authDomain:"atpib-82d72.firebaseapp.com",projectId:"atpib-82d72",storageBucket:"atpib-82d72.firebasestorage.app",messagingSenderId:"938927546204",appId:"1:938927546204:web:ea096f1dfe3b3754dd6b99",measurementId:"G-G3BRPK5B9T"},n=o(f),i=d(n),y=u(n),w=async t=>{const e=document.getElementById("create-account-btn");e.disabled=!0,e.textContent="Creating Account...";try{const r=(await c(i,t.email,t.password)).user;await p(g(y,"users",r.uid),{firstName:t.firstName,lastName:t.lastName,email:t.email,accountType:t.accountType,createdAt:new Date().toISOString()}),await l(r),alert("Account created! A verification email has been sent. Please check your inbox to verify your account."),m(i,s=>{s&&(s.emailVerified?console.log("Email verified. Access granted."):console.log("Email not verified. Please verify your email."))}),document.getElementById("success-modal").classList.remove("hidden")}catch(a){console.error("Error during sign-up:",a.message,a.code);const r=h(a.code);alert(r)}finally{e.disabled=!1,e.textContent="Create Account"}},h=t=>{switch(t){case"auth/email-already-in-use":return"This email is already registered. Please use a different email.";case"auth/weak-password":return"The password is too weak. Please choose a stronger password.";case"auth/invalid-email":return"The email address is invalid. Please enter a valid email.";default:return"An error occurred during sign-up. Please try again."}};document.querySelector("form").addEventListener("submit",t=>{t.preventDefault();const e={firstName:document.getElementById("first-name").value.trim(),lastName:document.getElementById("last-name").value.trim(),email:document.getElementById("email").value.trim(),accountType:document.getElementById("account-type").value,password:document.getElementById("password").value,confirmPassword:document.getElementById("confirm-password").value};if(!e.firstName||!e.lastName||!e.email||!e.password||!e.accountType){alert("All fields are required.");return}if(e.password!==e.confirmPassword){alert("Passwords do not match.");return}if(e.password.length<8){alert("Password must be at least 8 characters long.");return}w(e)});
